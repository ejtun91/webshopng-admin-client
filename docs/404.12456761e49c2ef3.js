"use strict";(self.webpackChunkweb_admin=self.webpackChunkweb_admin||[]).push([[404],{5404:(j,p,o)=>{o.r(p),o.d(p,{OrderModule:()=>Q,routes:()=>x});var i=o(6895),n=o(6684),f=o(1740),c=o(5593),g=o(433),A=o(947),h=o(7579),m=o(2722);const T={0:{label:"Pending",color:"primary"},1:{label:"Processed",color:"warning"},2:{label:"Shipped",color:"warning"},3:{label:"Delivered",color:"success"},4:{label:"Failed",color:"danger"}};var e=o(1571),b=o(3900),Z=o(2340),C=o(529),y=o(7572);let O=(()=>{class r{constructor(t,d){this.http=t,this.stripeService=d,this.apiURLOrders=Z.N.apiURL+"orders",this.apiURLProducts=Z.N.apiURL+"products"}getOrders(){return this.http.get(this.apiURLOrders)}getOrder(t){return this.http.get(`${this.apiURLOrders}/${t}`)}createOrder(t){return this.http.post(this.apiURLOrders,t)}updateOrder(t){return this.http.put(`${this.apiURLOrders}/${t.id}`,t)}deleteOrder(t){return this.http.delete(`${this.apiURLOrders}/${t}`)}getProduct(t){return this.http.get(`${this.apiURLProducts}/${t}`)}createCheckoutSession(t){return this.http.post(`${this.apiURLOrders}/create-checkout-session`,t).pipe((0,b.w)(d=>this.stripeService.redirectToCheckout({sessionId:d.id})))}cacheOrderData(t){localStorage.setItem("orderData",JSON.stringify(t))}getCachedOrderData(){return JSON.parse(localStorage.getItem("orderData"))}removeCachedOrderData(){localStorage.removeItem("orderData")}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(C.eN),e.LFG(y.tJ))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var v=o(2453),q=o(805),U=o(4247),l=o(7318),S=o(2137),L=o(6679);function I(r,s){1&r&&(e.TgZ(0,"tr")(1,"th",8),e._uU(2,"User "),e._UZ(3,"p-sortIcon",9),e.qZA(),e.TgZ(4,"th",10),e._uU(5,"Total Price "),e._UZ(6,"p-sortIcon",11),e.qZA(),e.TgZ(7,"th",12),e._uU(8,"Date Ordered "),e._UZ(9,"p-sortIcon",13),e.qZA(),e.TgZ(10,"th",14),e._uU(11,"Status "),e._UZ(12,"p-sortIcon",15),e.qZA(),e._UZ(13,"th"),e.qZA())}function D(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"p-tag",16),e.qZA(),e.TgZ(10,"td")(11,"p-button",17),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.deleteOrder(a.id))}),e.qZA(),e.TgZ(12,"p-button",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.showOrder(a.id))}),e.qZA()()()}if(2&r){const t=s.$implicit,d=e.oxw();e.xp6(2),e.Oqu(null==t.user?null:t.user.name),e.xp6(2),e.Oqu(t.totalPrice),e.xp6(2),e.Oqu(e.xi3(7,5,t.dateOrdered,"short")),e.xp6(3),e.Q6J("value",d.orderStatus[t.status].label)("severity",d.orderStatus[t.status].color)}}const $=function(){return{width:"50vw"}};let R=(()=>{class r{constructor(t,d){this.orderService=t,this.router=d,this.orders=[],this.orderStatus=T,this.endsubs$=new h.x}ngOnInit(){this._getOrders()}_getOrders(){this.orderService.getOrders().pipe((0,m.R)(this.endsubs$)).subscribe(t=>this.orders=t)}showOrder(t){this.router.navigateByUrl(`orders/${t}`)}deleteOrder(t){}ngOnDestroy(){this.endsubs$.next(null),this.endsubs$.complete()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(O),e.Y36(n.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["admin-orders-list"]],decls:9,vars:5,consts:[[1,"admin-page"],["header","Orders","subheader","List of all orders"],[1,"grid"],[1,"col-12"],["responsiveLayout","scroll","styleClass","p-datatable-gridlines",3,"value"],["pTemplate","header"],["pTemplate","body"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],["pSortableColumn","user"],["field","user"],["pSortableColumn","totalPrice"],["field","totalPrice"],["pSortableColumn","dateOrdered"],["field","dateOrdered"],["pSortableColumn","status"],["field","status"],[3,"value","severity"],["styleClass","p-button-danger mr-2","icon","pi pi-trash",3,"click"],["styleClass","p-button-success","icon","pi pi-eye",3,"click"]],template:function(t,d){1&t&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"p-card",1)(3,"div",2)(4,"div",3)(5,"p-table",4),e.YNc(6,I,14,0,"ng-template",5),e.YNc(7,D,13,8,"ng-template",6),e.qZA()()()()(),e._UZ(8,"p-confirmDialog",7)),2&t&&(e.xp6(5),e.Q6J("value",d.orders),e.xp6(3),e.Akn(e.DdM(4,$)),e.Q6J("baseZIndex",1e4))},dependencies:[c.zx,v.FN,q.jx,U.Z,l.iA,l.lQ,l.fz,S.Q,L.V,i.uU],encapsulation:2}),r})();var J=o(4479),F=o(2946);function N(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",13),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"div",13),e._uU(9),e.qZA(),e.TgZ(10,"div",13),e._uU(11),e.ALo(12,"currency"),e.qZA()()),2&r){const t=s.$implicit;e.xp6(2),e.Oqu(null==t.product?null:t.product.brand),e.xp6(2),e.Oqu(null==t.product?null:t.product.category.name),e.xp6(2),e.Oqu(e.xi3(7,5,null==t.product?null:t.product.price,"EUR")),e.xp6(3),e.Oqu(null==t.product?null:t.product.quantity),e.xp6(2),e.hij("",e.xi3(12,8,(null==t.product?null:t.product.quantity)*(null==t.product?null:t.product.price),"EUR")," ")}}function P(r,s){if(1&r&&(e.TgZ(0,"div",1)(1,"p-card",2)(2,"p-fieldset",3)(3,"div",4)(4,"div",5)(5,"h5"),e._uU(6,"Order Id"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA()(),e.TgZ(9,"div",5)(10,"h5"),e._uU(11,"Order Date"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.ALo(14,"date"),e.qZA()(),e.TgZ(15,"div",5)(16,"h5"),e._uU(17,"Order Status"),e.qZA(),e._UZ(18,"p-dropdown"),e.qZA(),e.TgZ(19,"div",5)(20,"h5"),e._uU(21," Order Total Price "),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.ALo(24,"currency"),e.qZA()()()(),e.TgZ(25,"p-fieldset",6)(26,"div",4)(27,"div",7),e._uU(28,"Name"),e.qZA(),e.TgZ(29,"div",7),e._uU(30,"Brand"),e.qZA(),e.TgZ(31,"div",7),e._uU(32,"Category"),e.qZA(),e.TgZ(33,"div",7),e._uU(34,"Price"),e.qZA(),e.TgZ(35,"div",7),e._uU(36,"Quantity"),e.qZA(),e.TgZ(37,"div",7),e._uU(38,"Subtotal"),e.qZA()(),e.YNc(39,N,13,11,"div",8),e.TgZ(40,"div",9)(41,"div",10),e._uU(42,"Total Price"),e.qZA(),e.TgZ(43,"div",7),e._uU(44),e.ALo(45,"currency"),e.qZA()()(),e.TgZ(46,"p-fieldset",11)(47,"div",4)(48,"div",5)(49,"h5"),e._uU(50,"Order Address"),e.qZA(),e.TgZ(51,"p"),e._uU(52),e._UZ(53,"br"),e._uU(54),e._UZ(55,"br"),e._uU(56),e._UZ(57,"br"),e._uU(58),e.qZA()(),e.TgZ(59,"div",5)(60,"h5"),e._uU(61,"Customer Info"),e.qZA(),e.TgZ(62,"p"),e._uU(63),e.qZA()(),e.TgZ(64,"div",5)(65,"h5"),e._uU(66,"Contact Info"),e.qZA(),e.TgZ(67,"p"),e._uU(68),e.qZA()()()()()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("header","View Order")("subheader","You can edit order status here"),e.xp6(1),e.Q6J("toggleable",!0),e.xp6(6),e.Oqu(t.order.id),e.xp6(5),e.Oqu(e.xi3(14,17,t.order.dateOrdered,"short")),e.xp6(10),e.Oqu(e.xi3(24,20,t.order.totalPrice,"EUR")),e.xp6(2),e.Q6J("toggleable",!0),e.xp6(14),e.Q6J("ngForOf",t.order.orderItems),e.xp6(5),e.Oqu(e.xi3(45,23,t.order.totalPrice,"EUR")),e.xp6(2),e.Q6J("toggleable",!0),e.xp6(6),e.hij("",t.order.shippingAddress1," "),e.xp6(2),e.hij(" ",t.order.shippingAddress2," "),e.xp6(2),e.AsE(" ",t.order.zip," ",t.order.city," "),e.xp6(2),e.hij(" ",t.order.country," "),e.xp6(5),e.Oqu(t.order.user.name),e.xp6(5),e.Oqu(t.order.phone)}}const x=[{path:"",component:R},{path:":id",component:(()=>{class r{constructor(t,d){this.orderService=t,this.route=d,this.endsubs$=new h.x}ngOnInit(){this._getOrder()}_getOrder(){this.route.params.pipe((0,m.R)(this.endsubs$)).subscribe(t=>{t?.id&&this.orderService.getOrder(t?.id).subscribe(d=>{this.order=d})})}deleteOrder(t){}ngOnDestroy(){this.endsubs$.next(null),this.endsubs$.complete()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(O),e.Y36(n.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["admin-orders-detail"]],decls:2,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[3,"header","subheader"],["legend","Order Details","styleClass","mb-4",3,"toggleable"],[1,"grid"],[1,"col-4"],["legend","Order Items","styleClass","mb-4",3,"toggleable"],[1,"col-2","font-bold"],["class","grid mb-5",4,"ngFor","ngForOf"],[1,"grid",2,"color","green"],[1,"col-2","col-offset-8","font-bold"],["legend","Order Address","styleClass","mb-4",3,"toggleable"],[1,"grid","mb-5"],[1,"col-2"]],template:function(t,d){1&t&&(e._UZ(0,"p-toast"),e.YNc(1,P,69,26,"div",0)),2&t&&(e.xp6(1),e.Q6J("ngIf",d.order))},dependencies:[i.sg,i.O5,v.FN,J.Lt,U.Z,F.p,i.H9,i.uU],encapsulation:2}),r})()}];let Q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[i.ez,n.Bz.forChild(x),f.j,c.hJ,g.u5,A.m,g.UX]}),r})()}}]);